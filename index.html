<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daftar Formulir</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module">
    // Impor fungsi yang dibutuhkan dari Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
    import { getDatabase, ref, once } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-database.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";

    // Konfigurasi aplikasi web Firebase kamu
    const firebaseConfig = {
      apiKey: "AIzaSyDMrg2agHatw9REIXs0Pj-894UMhMB08NI",
      authDomain: "databaseku-4e72e.firebaseapp.com",
      databaseURL: "https://databaseku-4e72e-default-rtdb.firebaseio.com",
      projectId: "databaseku-4e72e",
      storageBucket: "databaseku-4e72e.firebasestorage.app",
      messagingSenderId: "586627388924",
      appId: "1:586627388924:web:8b39ecd9f5e5d34ee78e79",
      measurementId: "G-JSP6R4FN49"
    };

    // Inisialisasi Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const database = getDatabase(app);
    
    const formListContainer = document.getElementById('form-list');
    const loadingMessage = document.getElementById('loading-message');

    // Ambil data formulir dari database
    once(ref(database, 'forms')).then((snapshot) => {
      const forms = snapshot.val();
      loadingMessage.style.display = 'none';

      if (forms) {
        Object.keys(forms).forEach(formId => {
          const formTitle = forms[formId].title || "Formulir Tanpa Judul";
          const formItem = document.createElement('a');
          formItem.href = `form.html?id=${formId}`;
          formItem.className = "block p-4 bg-gray-100 rounded-lg hover:bg-gray-200 transition";
          formItem.textContent = formTitle;
          formListContainer.appendChild(formItem);
        });
      } else {
        formListContainer.innerHTML = '<p class="text-center text-gray-500">Belum ada formulir.</p>';
      }
    }).catch(error => {
        console.error("Gagal memuat formulir: ", error);
        formListContainer.innerHTML = '<p class="text-center text-red-500">Terjadi kesalahan saat memuat data.</p>';
    });
  </script>
  
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; color: #1f2937; }
  </style>
</head>
<body class="p-8">

  <div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
    <h1 class="text-3xl font-bold mb-6 text-center">Daftar Formulir</h1>
    <div id="form-list" class="space-y-4">
      <p id="loading-message" class="text-center text-gray-500">Memuat formulir...</p>
    </div>
  </div>
</body>
</html>
